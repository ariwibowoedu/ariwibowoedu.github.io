import{r as x,c as d,x as _,o as c,f as a,g as v,j as e,t as w,z as B,y as M,D as N,p as G,u as g,s as C,i as E,F as S,a as U,l as J,M as K,A as F,C as R,h as q}from"./vue-BWBuzpSn.js";import{u as Q,b as O,L as X,c as D,d as Y,e as Z,a as I,f as ee}from"./index-FJWO_Q9h.js";import"./lottie-BkvdO2Qz.js";import"./aos-DiEYooRs.js";function T(){const o=x(!1);return{isOpen:o,open:()=>{o.value=!1},close:()=>{o.value=!1},toggle:()=>{o.value=!o.value}}}const te={key:0,class:"bg-light-overlay dark:bg-dark-overlay rounded-2xl shadow-xl max-w-lg w-full p-6 mx-4 transform transition-all"},le={key:0,class:"mb-4 flex justify-between items-center"},ae={class:"text-xl font-semibold"},se={class:"mb-6"},A={__name:"UiModal",props:{isOpen:Boolean,title:String},emits:["close"],setup(o,{emit:l}){const r=l;function y(){r("close")}return(p,u)=>o.isOpen?(c(),d("div",{key:0,onClick:N(y,["self"]),class:"fixed inset-0 flex justify-center items-center bg-black/60 backdrop-blur-sm z-50"},[a(M,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:v(()=>[o.isOpen?(c(),d("div",te,[o.title?(c(),d("div",le,[e("h2",ae,w(o.title),1),e("button",{class:"p-2 rounded-full hover:bg-gray-100 dark:bg-gray-800 active:scale-95 transition",onClick:y,"aria-label":"Close"}," âœ• ")])):_("",!0),e("div",se,[B(p.$slots,"default")])])):_("",!0)]),_:3})])):_("",!0)}},oe={class:"flex items-center gap-2 justify-end mt-4"},ne={class:"max-w-7xl mx-auto flex items-center justify-between py-4 px-4 lg:px-8"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-32"},ie={__name:"AdminLayout",setup(o){const l=T(),r=Q(),y=G(),p=x(!1),u=()=>{l.toggle()},k=async()=>{await r.signOut(),l.close(),y.push("/")};return(n,m)=>(c(),d(S,null,[a(A,{isOpen:g(l).isOpen.value,title:"Confirm logout",onClose:g(l).close},{default:v(()=>[m[2]||(m[2]=e("p",null,"Are you sure want to logout?",-1)),e("div",oe,[a(O,{onOnClick:g(l).toggle,variant:"outline"},{default:v(()=>[...m[0]||(m[0]=[C("Cancel",-1)])]),_:1},8,["onOnClick"]),a(O,{onOnClick:k,variant:"danger",loading:g(r).loading},{default:v(()=>[...m[1]||(m[1]=[C(" Logout ",-1)])]),_:1},8,["loading"])])]),_:1},8,["isOpen","onClose"]),e("header",{class:E(["fixed top-0 w-full transition-all duration-300 backdrop-blur-xl z-30 shadow-md",p.value?"-translate-y-full":"translate-y-0"])},[e("nav",ne,[a(X),e("button",{class:"rounded-lg p-2 transition active:scale-95","aria-label":"toggle menu",type:"button",onClick:u},[a(D,{icon:"log-out",classes:"w-8 h-8"})])])],2),e("main",re,[B(n.$slots,"default")])],64))}},ue={key:0,class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-200"},de={class:"truncate text-gray-800 dark:text-gray-100"},ce={key:0,class:"absolute z-20 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-y-auto"},pe={key:0,class:"p-2"},me=["onClick"],fe={key:0,class:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400"},ge={__name:"UiSelect",props:{label:String,options:{type:Array,required:!0},modelValue:[String,Number,Object],placeholder:{type:String,default:"Choose option..."},searchable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:l}){const r=o,y=l,p=x(!1),u=x(""),k=x(null),n=U(()=>Array.isArray(r.options)?r.options.map(i=>typeof i=="string"||typeof i=="number"?{label:String(i),value:i}:i):[]),m=U(()=>{const i=n.value.find(f=>f.value===r.modelValue);return i?i.label:null}),$=U(()=>!r.searchable||!u.value?n.value:n.value.filter(i=>i.label.toLowerCase().includes(u.value.toLowerCase())));function j(){p.value=!p.value}function L(i){y("update:modelValue",i.value),p.value=!1,u.value=""}function V(i){k.value&&!k.value.contains(i.target)&&(p.value=!1)}return J(()=>{document.addEventListener("click",V)}),K(()=>{document.removeEventListener("click",V)}),(i,f)=>(c(),d("div",{class:"relative w-full",ref_key:"dropdownRef",ref:k},[o.label?(c(),d("label",ue,w(o.label),1)):_("",!0),e("div",{onClick:j,class:"flex items-center justify-between px-3 pt-3 pb-3 rounded-2xl bg-light-surface dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-primary/70 focus:border-primary shadow-sm transition-all duration-200"},[e("span",de,w(m.value||o.placeholder),1),f[1]||(f[1]=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),a(M,{name:"fade"},{default:v(()=>[p.value?(c(),d("div",ce,[o.searchable?(c(),d("div",pe,[F(e("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),type:"text",placeholder:"Search",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"},null,512),[[R,u.value]])])):_("",!0),e("ul",null,[(c(!0),d(S,null,q($.value,h=>(c(),d("li",{key:h.value,onClick:P=>L(h),class:"px-3 py-2 cursor-pointer hover:bg-blue-500 hover:text-white text-sm text-gray-700 dark:text-gray-200"},w(h.label),9,me))),128)),$.value.length===0?(c(),d("li",fe," No result ")):_("",!0)])])):_("",!0)]),_:1})],512))}},z=Y(ge,[["__scopeId","data-v-72aee0c0"]]),ve=async o=>{const l=new FormData;l.append("file",o),l.append("upload_preset","wbwstudio");const r=await fetch("https://api.cloudinary.com/v1_1/dmgsz1pj8/upload",{method:"POST",body:l});if(!r.ok)throw new Error("Upload gagal");return await r.json()},ye={class:"flex justify-end items-center gap-2 mt-4"},be={class:"flex items-center justify-end gap-2"},xe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6"},ke={class:"relative w-full md:w-1/3 mb-2"},_e={class:"absolute inset-y-0 left-0 flex items-center pl-3"},we={key:0},he={class:"overflow-x-auto"},Ce={class:"min-w-full text-sm"},Oe={class:"p-2 text-left"},$e=["onClick"],Ve={class:"p-2 text-left"},Se={class:"p-2 text-left"},je=["src"],Le={class:"p-2 text-left"},Ue=["onClick"],Ie={__name:"AdminPage",setup(o){const l=Z(),r=T(),y=T(),p=x(!1),u=x(null),k=x(null),n=x({title:"",desc:"",category:"",status:"",link:"",urlToImage:""}),m=x(null),$=["Apps","Tools","Web"],j=["maintain","active"],L=()=>r.toggle(),V=b=>{u.value=b.id,n.value={...b},r.toggle()},i=b=>{k.value=b,y.toggle()},f=()=>{r.close(),y.close(),k.value=null,u.value=null,m.value=null,n.value={title:"",desc:"",category:"",status:"",link:"",urlToImage:""}},h=b=>{m.value=b.target.files[0]},P=async()=>{try{if(p.value=!0,m.value){const t=await ve(m.value);n.value.urlToImage=t.secure_url}const b={...n.value};u.value?await l.updateProject(u.value,b):await l.addProject(b),f()}catch(b){console.error(b)}finally{p.value=!1}},H=async()=>{await l.deleteProject(k.value),f()};return(b,t)=>(c(),d(S,null,[a(A,{isOpen:g(y).isOpen.value,title:"Delete Confirmation",onClose:f},{default:v(()=>[t[9]||(t[9]=e("p",null,"Are you sure want to delete this products",-1)),e("div",ye,[a(O,{onOnClick:f,variant:"outline"},{default:v(()=>[...t[7]||(t[7]=[C("Cancel",-1)])]),_:1}),a(O,{onOnClick:H,variant:"danger",loading:g(l).loading},{default:v(()=>[...t[8]||(t[8]=[C("Delete",-1)])]),_:1},8,["loading"])])]),_:1},8,["isOpen"]),a(A,{isOpen:g(r).isOpen.value,title:u.value?"Update project":"Create new project",onClose:f},{default:v(()=>[e("form",{onSubmit:N(P,["prevent"]),class:"space-y-4"},[a(I,{type:"text",modelValue:n.value.title,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.title=s),"aria-label":"title",label:"Title",id:"title"},null,8,["modelValue"]),a(ee,{modelValue:n.value.desc,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.desc=s),label:"Description",id:"desc"},null,8,["modelValue"]),a(z,{modelValue:n.value.status,"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.status=s),options:j},null,8,["modelValue"]),a(z,{modelValue:n.value.category,"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.category=s),options:$},null,8,["modelValue"]),a(I,{type:"text",modelValue:n.value.link,"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.link=s),"aria-label":"link",id:"link",label:"Link"},null,8,["modelValue"]),e("input",{type:"file",onChange:h},null,32),e("div",be,[a(O,{onOnClick:f,variant:"outline"},{default:v(()=>[...t[10]||(t[10]=[C("Cancel",-1)])]),_:1}),a(O,{type:"submit",loading:p.value},{default:v(()=>[C(w(u.value?"Update":"Save"),1)]),_:1},8,["loading"])])],32)]),_:1},8,["isOpen","title"]),a(ie,null,{default:v(()=>[e("div",xe,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold"},"Projects",-1)),a(O,{onOnClick:L},{default:v(()=>[...t[11]||(t[11]=[C("+ new Project",-1)])]),_:1})]),e("div",ke,[e("span",_e,[a(D,{icon:"search",class:"w-5 h-5 text-gray-500"})]),F(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>g(l).searchTerm=s),onInput:t[6]||(t[6]=s=>g(l).searchProject(g(l).searchTerm)),placeholder:"Search product name",class:"pl-9 pr-3 py-2 w-full border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"},null,544),[[R,g(l).searchTerm]])]),e("div",null,[g(l).loading?(c(),d("div",we,"Loading...")):_("",!0),e("div",he,[e("table",Ce,[e("tbody",null,[(c(!0),d(S,null,q(g(l).projects,s=>(c(),d("tr",{key:s.id,class:"hover:bg-light-surface dark:bg-dark-surface cursor-pointer"},[e("td",Oe,[e("button",{onClick:W=>V(s),class:"hover:text-light-primary cursor-pointer"},w(s.title),9,$e)]),e("td",Ve,w(new Date(s.created_at).toLocaleString()),1),e("td",Se,[e("span",{class:E(["px-2 py-1 rounded text-xs font-semibold",s.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},w(s.status),3)]),e("td",null,[e("img",{class:"w-10 h-10",src:s.urlToImage,loading:"lazy"},null,8,je)]),e("td",Le,[e("button",{onClick:W=>i(s.id),class:"hover:text-red-500 active:scale-95 p-2"},[a(D,{icon:"trash",classes:"w-3 h-3"})],8,Ue)])]))),128))])])])])]),_:1})],64))}};export{Ie as default};
