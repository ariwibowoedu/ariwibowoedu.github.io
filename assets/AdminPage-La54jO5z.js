import{r as w,c as i,x as h,o as u,f as s,g as y,j as e,t as k,z as M,y as E,I as F,p as K,u as v,s as C,i as R,F as j,a as S,l as W,J as G,K as A,L as I,h as q}from"./vue-Dw4vXbjU.js";import{u as Q,L as X,a as T,b as Y,c as Z}from"./index-BIATwEnU.js";import{a as $,_ as B}from"./UiButton-Dbv_HUwW.js";import"./lottie-FS6_mJjq.js";import"./aos-DiEYooRs.js";function D(){const t=w(!1);return{isOpen:t,open:()=>{t.value=!1},close:()=>{t.value=!1},toggle:()=>{t.value=!t.value}}}const ee={key:0,class:"bg-light-overlay dark:bg-dark-overlay rounded-2xl shadow-xl max-w-lg w-full p-6 mx-4 transform transition-all"},te={key:0,class:"mb-4 flex justify-between items-center"},le={class:"text-xl font-semibold"},ae={class:"mb-6"},P={__name:"UiModal",props:{isOpen:Boolean,title:String},emits:["close"],setup(t,{emit:a}){const r=a;function m(){r("close")}return(p,d)=>t.isOpen?(u(),i("div",{key:0,onClick:F(m,["self"]),class:"fixed inset-0 flex justify-center items-center bg-black/60 backdrop-blur-sm z-50"},[s(E,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:y(()=>[t.isOpen?(u(),i("div",ee,[t.title?(u(),i("div",te,[e("h2",le,k(t.title),1),e("button",{class:"p-2 rounded-full hover:bg-gray-100 dark:bg-gray-800 active:scale-95 transition",onClick:m,"aria-label":"Close"}," âœ• ")])):h("",!0),e("div",ae,[M(p.$slots,"default")])])):h("",!0)]),_:3})])):h("",!0)}},oe={class:"flex items-center gap-2 justify-end mt-4"},se={class:"max-w-7xl mx-auto flex items-center justify-between py-4 px-4 lg:px-8"},ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-32"},re={__name:"AdminLayout",setup(t){const a=D(),r=Q(),m=K(),p=w(!1),d=()=>{a.toggle()},x=async()=>{await r.signOut(),a.close(),m.push("/")};return(o,f)=>(u(),i(j,null,[s(P,{isOpen:v(a).isOpen.value,title:"Confirm logout",onClose:v(a).close},{default:y(()=>[f[2]||(f[2]=e("p",null,"Are you sure want to logout?",-1)),e("div",oe,[s($,{onOnClick:v(a).toggle,variant:"outline"},{default:y(()=>[...f[0]||(f[0]=[C("Cancel",-1)])]),_:1},8,["onOnClick"]),s($,{onOnClick:x,variant:"danger",loading:v(r).loading},{default:y(()=>[...f[1]||(f[1]=[C(" Logout ",-1)])]),_:1},8,["loading"])])]),_:1},8,["isOpen","onClose"]),e("header",{class:R(["fixed top-0 w-full transition-all duration-300 backdrop-blur-xl z-30 shadow-md",p.value?"-translate-y-full":"translate-y-0"])},[e("nav",se,[s(X),e("button",{class:"rounded-lg p-2 transition active:scale-95","aria-label":"toggle menu",type:"button",onClick:d},[s(T,{icon:"log-out",classes:"w-8 h-8"})])])],2),e("main",ne,[M(o.$slots,"default")])],64))}},ie={key:0,class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-200"},ue={class:"truncate text-gray-800 dark:text-gray-100"},de={key:0,class:"absolute z-20 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-y-auto"},ce={key:0,class:"p-2"},pe=["onClick"],me={key:0,class:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400"},fe={__name:"UiSelect",props:{label:String,options:{type:Array,required:!0},modelValue:[String,Number,Object],placeholder:{type:String,default:"Choose option..."},searchable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:a}){const r=t,m=a,p=w(!1),d=w(""),x=w(null),o=S(()=>Array.isArray(r.options)?r.options.map(c=>typeof c=="string"||typeof c=="number"?{label:String(c),value:c}:c):[]),f=S(()=>{const c=o.value.find(g=>g.value===r.modelValue);return c?c.label:null}),V=S(()=>!r.searchable||!d.value?o.value:o.value.filter(c=>c.label.toLowerCase().includes(d.value.toLowerCase())));function L(){p.value=!p.value}function U(c){m("update:modelValue",c.value),p.value=!1,d.value=""}function O(c){x.value&&!x.value.contains(c.target)&&(p.value=!1)}return W(()=>{document.addEventListener("click",O)}),G(()=>{document.removeEventListener("click",O)}),(c,g)=>(u(),i("div",{class:"relative w-full",ref_key:"dropdownRef",ref:x},[t.label?(u(),i("label",ie,k(t.label),1)):h("",!0),e("div",{onClick:L,class:"flex items-center justify-between px-3 pt-3 pb-3 rounded-2xl bg-light-surface dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-primary/70 focus:border-primary shadow-sm transition-all duration-200"},[e("span",ue,k(f.value||t.placeholder),1),g[1]||(g[1]=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),s(E,{name:"fade"},{default:y(()=>[p.value?(u(),i("div",de,[t.searchable?(u(),i("div",ce,[A(e("input",{"onUpdate:modelValue":g[0]||(g[0]=_=>d.value=_),type:"text",placeholder:"Search",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"},null,512),[[I,d.value]])])):h("",!0),e("ul",null,[(u(!0),i(j,null,q(V.value,_=>(u(),i("li",{key:_.value,onClick:z=>U(_),class:"px-3 py-2 cursor-pointer hover:bg-blue-500 hover:text-white text-sm text-gray-700 dark:text-gray-200"},k(_.label),9,pe))),128)),V.value.length===0?(u(),i("li",me," No result ")):h("",!0)])])):h("",!0)]),_:1})],512))}},N=Y(fe,[["__scopeId","data-v-72aee0c0"]]),ge={class:"relative w-full"},ve=["id","placeholder","rows"],ye=["for"],xe={key:1,class:"mt-1 text-sm text-gray-500"},be={key:2,class:"mt-1 text-sm text-red-500"},he={__name:"UiTextarea",props:{modelValue:{type:String,default:""},id:{type:String,default:"base-textarea"},label:String,placeholder:{type:String,default:" "},rows:{type:Number,default:4},helper:String,error:String},emits:["update:modelValue"],setup(t,{emit:a}){const r=t,m=a,p=S({get:()=>r.modelValue,set:d=>m("update:modelValue",d)});return(d,x)=>(u(),i("div",ge,[A(e("textarea",{"onUpdate:modelValue":x[0]||(x[0]=o=>p.value=o),id:t.id,placeholder:t.placeholder,rows:t.rows,class:"peer w-full px-3 pt-4 pb-2 border rounded-2xl resize-none bg-light-overlay dark:bg-dark-overlay text-light-text-primary dark:text-dark-text-primary focus:outline-none focus:ring-2 focus:ring-primary/70 focus:border-primary shadow-sm transition-all duration-200"},null,8,ve),[[I,p.value]]),t.label?(u(),i("label",{key:0,for:t.id,class:"absolute left-3 top-1 text-gray-500 text-xs transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-xs peer-focus:text-primary px-1"},k(t.label),9,ye)):h("",!0),t.helper?(u(),i("p",xe,k(t.helper),1)):h("",!0),t.error?(u(),i("p",be,k(t.error),1)):h("",!0)]))}},ke=async t=>{const a=new FormData;a.append("file",t),a.append("upload_preset","wbwstudio");const r=await fetch("https://api.cloudinary.com/v1_1/dmgsz1pj8/upload",{method:"POST",body:a});if(!r.ok)throw new Error("Upload gagal");return await r.json()},we={class:"flex justify-end items-center gap-2 mt-4"},_e={class:"flex items-center justify-end gap-2"},Ce={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6"},$e={class:"relative w-full md:w-1/3 mb-2"},Ve={class:"absolute inset-y-0 left-0 flex items-center pl-3"},Oe={key:0},Se={class:"overflow-x-auto"},je={class:"min-w-full text-sm"},Le={class:"p-2 text-left"},Ue=["onClick"],Te={class:"p-2 text-left"},De={class:"p-2 text-left"},Pe=["src"],Ae={class:"p-2 text-left"},Ie=["onClick"],Fe={__name:"AdminPage",setup(t){const a=Z(),r=D(),m=D(),p=w(!1),d=w(null),x=w(null),o=w({title:"",desc:"",category:"",status:"",link:"",urlToImage:""}),f=w(null),V=["Apps","Tools","Web"],L=["maintain","active"],U=()=>r.toggle(),O=b=>{d.value=b.id,o.value={...b},r.toggle()},c=b=>{x.value=b,m.toggle()},g=()=>{r.close(),m.close(),x.value=null,d.value=null,f.value=null,o.value={title:"",desc:"",category:"",status:"",link:"",urlToImage:""}},_=b=>{f.value=b.target.files[0]},z=async()=>{try{if(p.value=!0,f.value){const l=await ke(f.value);o.value.urlToImage=l.secure_url}const b={...o.value};d.value?await a.updateProject(d.value,b):await a.addProject(b),g()}catch(b){console.error(b)}finally{p.value=!1}},H=async()=>{await a.deleteProject(x.value),g()};return(b,l)=>(u(),i(j,null,[s(P,{isOpen:v(m).isOpen.value,title:"Delete Confirmation",onClose:g},{default:y(()=>[l[9]||(l[9]=e("p",null,"Are you sure want to delete this products",-1)),e("div",we,[s($,{onOnClick:g,variant:"outline"},{default:y(()=>[...l[7]||(l[7]=[C("Cancel",-1)])]),_:1}),s($,{onOnClick:H,variant:"danger",loading:v(a).loading},{default:y(()=>[...l[8]||(l[8]=[C("Delete",-1)])]),_:1},8,["loading"])])]),_:1},8,["isOpen"]),s(P,{isOpen:v(r).isOpen.value,title:d.value?"Update project":"Create new project",onClose:g},{default:y(()=>[e("form",{onSubmit:F(z,["prevent"]),class:"space-y-4"},[s(B,{type:"text",modelValue:o.value.title,"onUpdate:modelValue":l[0]||(l[0]=n=>o.value.title=n),"aria-label":"title",label:"Title",id:"title"},null,8,["modelValue"]),s(he,{modelValue:o.value.desc,"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.desc=n),label:"Description",id:"desc"},null,8,["modelValue"]),s(N,{modelValue:o.value.status,"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.status=n),options:L},null,8,["modelValue"]),s(N,{modelValue:o.value.category,"onUpdate:modelValue":l[3]||(l[3]=n=>o.value.category=n),options:V},null,8,["modelValue"]),s(B,{type:"text",modelValue:o.value.link,"onUpdate:modelValue":l[4]||(l[4]=n=>o.value.link=n),"aria-label":"link",id:"link",label:"Link"},null,8,["modelValue"]),e("input",{type:"file",onChange:_},null,32),e("div",_e,[s($,{onOnClick:g,variant:"outline"},{default:y(()=>[...l[10]||(l[10]=[C("Cancel",-1)])]),_:1}),s($,{type:"submit",loading:p.value},{default:y(()=>[C(k(d.value?"Update":"Save"),1)]),_:1},8,["loading"])])],32)]),_:1},8,["isOpen","title"]),s(re,null,{default:y(()=>[e("div",Ce,[l[12]||(l[12]=e("h2",{class:"text-2xl font-bold"},"Projects",-1)),s($,{onOnClick:U},{default:y(()=>[...l[11]||(l[11]=[C("+ new Project",-1)])]),_:1})]),e("div",$e,[e("span",Ve,[s(T,{icon:"search",class:"w-5 h-5 text-gray-500"})]),A(e("input",{"onUpdate:modelValue":l[5]||(l[5]=n=>v(a).searchTerm=n),onInput:l[6]||(l[6]=n=>v(a).searchProject(v(a).searchTerm)),placeholder:"Search product name",class:"pl-9 pr-3 py-2 w-full border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"},null,544),[[I,v(a).searchTerm]])]),e("div",null,[v(a).loading?(u(),i("div",Oe,"Loading...")):h("",!0),e("div",Se,[e("table",je,[e("tbody",null,[(u(!0),i(j,null,q(v(a).projects,n=>(u(),i("tr",{key:n.id,class:"hover:bg-light-surface dark:bg-dark-surface cursor-pointer"},[e("td",Le,[e("button",{onClick:J=>O(n),class:"hover:text-light-primary cursor-pointer"},k(n.title),9,Ue)]),e("td",Te,k(new Date(n.created_at).toLocaleString()),1),e("td",De,[e("span",{class:R(["px-2 py-1 rounded text-xs font-semibold",n.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},k(n.status),3)]),e("td",null,[e("img",{class:"w-10 h-10",src:n.urlToImage,loading:"lazy"},null,8,Pe)]),e("td",Ae,[e("button",{onClick:J=>c(n.id),class:"hover:text-red-500 active:scale-95 p-2"},[s(T,{icon:"trash",classes:"w-3 h-3"})],8,Ie)])]))),128))])])])])]),_:1})],64))}};export{Fe as default};
